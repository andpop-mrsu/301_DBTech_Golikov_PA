# Веб-приложение для управления студентами и экзаменами

Веб-приложение для ввода, сохранения в базе данных и вывода информации о составе групп и сданных экзаменах.

## Структура проекта

```
Task08/
├── public/              # Корневая директория сайта
│   ├── index.php       # Главная страница со списком студентов
│   ├── config.php      # Конфигурация подключения к БД
│   ├── init_db.php     # Скрипт инициализации базы данных
│   ├── student_*.php   # Файлы для работы со студентами
│   └── exam_*.php      # Файлы для работы с экзаменами
├── data/               # Директория для базы данных SQLite
└── db_init.sql         # Исходная схема базы данных (PostgreSQL)
```

## Требования

- PHP 7.4 или выше
- Расширение PHP PDO с поддержкой SQLite

## Установка и запуск

### 1. Инициализация базы данных

Перед первым запуском необходимо инициализировать базу данных. Выполните следующую команду из корневой директории проекта:

```bash
cd public
php init_db.php
```

Это создаст файл `data/database.db` с необходимой структурой таблиц и тестовыми данными.

### 2. Запуск веб-сервера

Из корневой директории `Task08` запустите встроенный веб-сервер PHP:

```bash
php -S localhost:3000 -t public
```

Сервер будет доступен по адресу `http://localhost:3000`

### 3. Открытие приложения

Откройте в браузере один из следующих адресов:
- http://localhost:3000/
- http://localhost:3000/index.php

## Использование

### Главная страница (index.php)

На главной странице отображается список всех студентов с сортировкой по номеру группы и фамилии.

**Возможности:**
- **Фильтрация по группе** — выберите группу из выпадающего списка и нажмите "Применить"
- **Редактировать** — открывает форму для изменения данных студента
- **Удалить** — открывает страницу подтверждения удаления студента
- **Результаты экзаменов** — открывает список всех экзаменов студента
- **Добавить студента** — кнопка внизу страницы для добавления нового студента

### Работа со студентами

#### Добавление студента

1. Нажмите кнопку "Добавить студента" внизу списка
2. Заполните форму:
   - Фамилия, Имя (обязательные поля)
   - Отчество (необязательно)
   - Дата рождения
   - Пол (выбор переключателем)
   - Группа (выбор из списка)
   - Дата поступления
3. Нажмите "Сохранить"

#### Редактирование студента

1. Нажмите кнопку "Редактировать" рядом с нужным студентом
2. Измените необходимые поля
3. Нажмите "Сохранить"

#### Удаление студента

1. Нажмите кнопку "Удалить" рядом с нужным студентом
2. Подтвердите удаление на странице подтверждения
3. При удалении студента автоматически удаляются все его экзамены (каскадное удаление)

### Работа с экзаменами

#### Просмотр экзаменов студента

1. Нажмите кнопку "Результаты экзаменов" рядом с нужным студентом
2. Откроется список всех экзаменов студента в хронологическом порядке

#### Добавление экзамена

1. Откройте страницу результатов экзаменов студента
2. Нажмите кнопку "Добавить экзамен"
3. Заполните форму:
   - **Дисциплина** — выбирается из списка дисциплин, соответствующих направлению подготовки студента
   - **Оценка** — выбор из: 2, 3, 4, 5
   - **Дата экзамена** — дата сдачи экзамена
   - **Учебный год** — формат "2020/2021"
4. Нажмите "Сохранить"

**Важно:** Можно вводить экзамены задним числом за любой курс, на котором ранее учился студент. Дисциплины в списке соответствуют учебному направлению студента.

#### Редактирование экзамена

1. На странице результатов экзаменов нажмите "Редактировать" рядом с нужным экзаменом
2. Измените необходимые поля
3. Нажмите "Сохранить"

#### Удаление экзамена

1. На странице результатов экзаменов нажмите "Удалить" рядом с нужным экзаменом
2. Подтвердите удаление на странице подтверждения

## Структура базы данных

База данных SQLite содержит следующие таблицы:

- **directions** — направления подготовки
- **subjects** — дисциплины
- **curriculum** — учебные планы (связь направлений и дисциплин)
- **groups** — группы студентов
- **students** — студенты
- **exams** — результаты экзаменов
- **credits** — результаты зачетов

## Технические детали

- **Язык:** PHP
- **База данных:** SQLite
- **Подключение:** PDO с подготовленными запросами
- **Синтаксис:** Альтернативный синтаксис PHP (без echo в шаблонах)
- **Стили:** Встроенный CSS

## Возможные проблемы

### База данных не создается

Убедитесь, что:
- Директория `data/` существует и доступна для записи
- PHP имеет права на создание файлов в директории `data/`

### Ошибка подключения к БД

Проверьте путь к файлу базы данных в `public/config.php`. По умолчанию используется `../data/database.db`

### Страница не открывается

Убедитесь, что:
- Веб-сервер запущен на порту 3000
- Вы используете правильный адрес: `http://localhost:3000`
- Файл `index.php` находится в директории `public/`

## Переинициализация базы данных

Если нужно пересоздать базу данных с начальными данными:

1. Удалите файл `data/database.db` (если существует)
2. Запустите `php init_db.php` из директории `public/`

## Примечания

- Все данные валидируются на стороне сервера
- При удалении студента автоматически удаляются все связанные экзамены
- Дисциплины фильтруются по направлению подготовки студента
- Поддерживается ввод экзаменов задним числом за любой курс обучения

